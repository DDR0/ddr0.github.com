<!DOCTYPE html>
<html lang='en'>
	<head>
		<meta charset=utf-8>
		<title>Calculating_a_Bounce</title>
		<link href="/css/grey-and-blue.css" rel=stylesheet>
		<meta name="theme-color" content="#3377FF">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5.0, minimum-scale=1">
		<link rel="canonical" href="https://ddr0.ca/single-post">
		<link href='/css/blog.css' rel='stylesheet'>
		<link rel="alternate" type="application/rss+xml" title="DDR's Blog" href="/blog-rss-feed.xml" />
	</head>
	<body>
		<a href='#content' id='skip-nav'>skip nav</a>
		<div id='content-holder'>
			<div id="content-header">
				<div id='badge'><a href="/blog"><img alt='' src='/images/icons/page.svg'></a></div>
				<h1><img alt='blog' src='/images/text-blog.png'></h1>
				<div id='icon-bar'>
					<a href='/blog'    ><img src='/images/icons/page.svg' ><span>blog</span></a>
					<a href='/gallery' ><img src='/images/icons/work.svg' ><span>gallery</span></a>
					<a href='/contact' ><img src='/images/icons/chat2.svg'><span>contact</span></a>
					<a href='/rss.xml'                                                            ><img src='/images/icons/rss.svg'  ><span>rss</span></a>
				</div>
			</div>
			<a name='content'></a>
			<div id='content-pane'>
				<h2><a href="05.Calculating_a_Bounce.html">Calculating a Bounce</a></h2>
				<div class="no-p-indent">
					<p>Problem: Given a ball and a curved wall, how do we calculate the angle of the bounce of the ball? Assuming we have the normal of the wall at the bounce location, our problem becomes:</p>
					<p>Problem: Given two vectors, x₁ and n, how do we mirror vector x₁ around vector n to get x′? (x₁ is the ball velocity and n is the normal of the wall.)</p>
				
					<p>Solution: Implement <a href="https://mathworld.wolfram.com/Reflection.html">https://mathworld.wolfram.com/Reflection.html</a> (The first picture is accurate to the situation.)</p>
				
					<p>As written: x₁′ = -x₁ + 2x₀ + 2n̂[(x₁-x₀)·n̂]</p>
				
					<p>Given that x₀ is always [0,0], it can be ignored.</p>
				
					<p>x₁′ = -x₁ + 2n̂[x₁·n̂]</p>
				
					<p>Given that n is pre-normalized, we can un-hat the ns.</p>
				
					<p>x₁′ = -x₁ + 2n[x₁·n]</p>
				
					<p>To calculate the dot product: (from <a href="https://www.mathsisfun.com/algebra/vectors-dot-product.html">https://www.mathsisfun.com/algebra/vectors-dot-product.html</a>)</p>
				
					<p>x₁′ = -x₁ + 2n[x₁[0]*n[0]+x₁[1]*n[1]]</p>
				
					<p>Normalize the notation, since we're now using [0] to get the vector components.</p>
				
					<p>x₁′ = -x₁ + 2*n*(x₁[0]*n[0]+x₁[1]*n[1])</p>
				
					<p>Now, to calculate both parts of the vector separately:</p>
				
					<p>x₁[0]′ = -x₁[0] + 2*n[0]*(x₁[0]*n[0]+x₁[1]*n[1])</p>
					<p>x₁[1]′ = -x₁[1] + 2*n[1]*(x₁[0]*n[0]+x₁[1]*n[1])</p>
				
					<p>Now you can replace the x₁ and n with the variables of your program, and be on your way. For example, in Javascript:
					<div class="code-container">
						<code>//Returns vector v mirrored around the normalized vector mir.</code>
						<code>function vReflectIn(v,mir) { </code>
						<code>	return [</code>
						<code>		-v[0] + 2*mir[0]*(v[0]*mir[0]+v[1]*mir[1]),</code>
						<code>		-v[1] + 2*mir[1]*(v[0]*mir[0]+v[1]*mir[1]),</code>
						<code>	]; </code>
						<code>}</code>
					</div>
				</div>
			</div>
		</div>
	</body>
	<footer>Site ©2021 DDR.</footer>
</html>