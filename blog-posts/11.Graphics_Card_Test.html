<!DOCTYPE html>
<html lang='en'>
	<head>
		<meta charset=utf-8>
		<title>Graphics_Card_Test</title>
		<link href="/css/grey-and-blue.css" rel=stylesheet>
		<meta name="theme-color" content="#3377FF">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5.0, minimum-scale=1">
		<link rel="canonical" href="https://ddr0.ca/single-post">
		<link href='/css/blog.css' rel='stylesheet'>
		<link rel="alternate" type="application/rss+xml" title="DDR's Blog" href="/blog-rss-feed.xml" />
		<link href='/css/prism-okaidia.css' rel='stylesheet'>
		<script async defer src='/scripts/unindent-code-blocks.js'></script>
	</head>
	<body>
		<a href='#content' id='skip-nav'>skip nav</a>
		<div id='content-holder'>
			<div id="content-header">
				<div id='badge'><a href="/blog"><img alt='' src='/images/icons/page.svg'></a></div>
				<h1><img alt='blog' src='/images/text-blog.png'></h1>
				<div id='icon-bar'>
					<a href='/blog'    ><img src='/images/icons/page.svg' ><span>blog</span></a>
					<a href='/gallery' ><img src='/images/icons/work.svg' ><span>gallery</span></a>
					<a href='/contact' ><img src='/images/icons/chat2.svg'><span>contact</span></a>
					<a href='/rss.xml'                                                            ><img src='/images/icons/rss.svg'  ><span>rss</span></a>
				</div>
			</div>
			<a name='content'></a>
			<div id='content-pane'>
				<h2 id="Graphics-Card-Test"><a href="11.Graphics_Card_Test.html">Graphics Card Exposure Test</a></h2>
				
				<p>Sometimes, your graphics card's details are exposed to the web. <b id="graphics-card-test-output">Yours are not right now, though, which is good.</b> Try opening this page in different browsers – I found Chrome had much more information than Firefox, for example.</p>
				
				<h3>The Code</h3>
				
				<script>{
					const getGPU = () => {
						const ctx = document.createElement('canvas').getContext('webgl') 
						const ext = ctx.getExtension('WEBGL_debug_renderer_info')
						return {
							card: ctx.getParameter(ext.UNMASKED_RENDERER_WEBGL),
							vendor: ctx.getParameter(ext.UNMASKED_VENDOR_WEBGL),
						}
					}
					
					try {
						const gpu = getGPU()
						document.getElementById('graphics-card-test-output')
							.textContent = `For example, you are running ${gpu.vendor}'s ${gpu.card}.`
					} catch (e) {
						console.info("Graphics card test failed.", e)
					}
				}</script>
				
				<code class="prism-block language-js">
					<span class="token comment">//Function to grab GPU data.</span>
					<span class="token keyword">const</span> <span class="token function-variable function">getGPU</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
						<span class="token keyword">const</span> ctx <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'webgl'</span><span class="token punctuation">)</span> 
						<span class="token keyword">const</span> ext <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getExtension</span><span class="token punctuation">(</span><span class="token string">'WEBGL_debug_renderer_info'</span><span class="token punctuation">)</span>
						<span class="token keyword">return</span> <span class="token punctuation">{</span>
							card<span class="token operator">:</span> ctx<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span>ext<span class="token punctuation">.</span><span class="token constant">UNMASKED_RENDERER_WEBGL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
							vendor<span class="token operator">:</span> ctx<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span>ext<span class="token punctuation">.</span><span class="token constant">UNMASKED_VENDOR_WEBGL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
					
					<span class="token comment">//Put the GPU data into the web page.</span>
					<span class="token keyword">const</span> gpu <span class="token operator">=</span> <span class="token function">getGPU</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'graphics-card-test-output'</span><span class="token punctuation">)</span>
						<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Yours is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gpu<span class="token punctuation">.</span>vendor<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'s </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gpu<span class="token punctuation">.</span>card<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span>
				</code>
			</div>
		</div>
	</body>
	<footer>Site ©2021 DDR.</footer>
</html>