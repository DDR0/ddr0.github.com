<!DOCTYPE html>
<html lang='en'>
	<head>
		<meta charset=utf-8>
		<title>Same Script, Multiple Tags</title>
		<link href="/css/grey-and-blue.css" rel=stylesheet>
		<meta name="theme-color" content="#3377FF">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5.0, minimum-scale=1">
		<link rel="canonical" href="https://ddr0.ca/single-post">
		<link href='/css/blog.css' rel='stylesheet'>
		<link href='/css/prism-okaidia.css' rel='stylesheet'>
		<script defer src='/scripts/unindent-code-blocks.js'></script>
	</head>
	<body>
		<a href='#content' id='skip-nav'>skip nav</a>
		<div id='content-holder'>
			<div id="content-header">
				<div id='badge'><a href="/blog"><img alt='' src='/images/icons/page.svg'></a></div>
				<h1><img alt='blog' src='/images/text-blog.png'></h1>
				<div id='icon-bar'>
					<a href='/blog'    ><img src='/images/icons/page.svg' ><span>blog</span></a>
					<a href='/gallery' ><img src='/images/icons/work.svg' ><span>gallery</span></a>
					<a href='/contact' ><img src='/images/icons/chat2.svg'><span>contact</span></a>
					<a href='/rss.xml'                                                            ><img src='/images/icons/rss.svg'  ><span>rss</span></a>
				</div>
			</div>
			<a name='content'></a>
			<div id='content-pane'>
				<h2><a href="/blog-posts/12.Same_Script_Multiple_Tags">Same Script, Multiple Tags</a></h2>

				<p>Today, I happened on a fun quirk of web-dev. What happens if you include the same script twice, say like this:</p>
				
				<code class="prism-block language-html">
					<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
							<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
							<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
				</code>
				
				<p><code>test.js</code> only runs once, despite being included twice. It seems modules have a specific trait where they're only ever evaluated once, I believe specified in <a href="https://262.ecma-international.org/6.0/#sec-moduleevaluation">steps 4 and 5 of ECMAScript 6.0 section 15.2.1.16.5</a>.</p>
				
				<p class=noindent>Nothing good ever comes of running scripts multiple times. I'm glad it's out.</p>
				
				<p class=noindent>P.S.: Fun fact: You can still <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/open"><code>document.write(…)</code></a> in an ECMAScript module, which just feels… <em>wrong.</em> (At least the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/with">with</a> statement is history there, as modules are always in strict mode.)</p>

				<span class="tags">tags: <a href="/blog-posts/tags#js">js</a>, <a href="/blog-posts/tags#quirk">quirk</a>, <a href="/blog-posts/tags#microblog">microblog</a>, <a href="/blog-posts/tags#web-dev">web dev</a></span>

			</div>
		</div>
	</body>
	<footer>Site ©2025 DDR.</footer>
</html>